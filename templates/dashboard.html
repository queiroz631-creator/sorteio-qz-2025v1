{% extends "base.html" %}

{% block title %}Dashboard - Sorteio QZ{% endblock %}

{% block content %}
<div class="row">

    <!-- Summary Cards -->
    <div class="col-lg-6 mb-4">
        <div class="card border-danger h-100">
            <div class="card-header bg-danger text-white">
                <h5 class="card-title mb-0">
                    <i class="fas fa-chart-bar me-2"></i>Resumo da Participação
                </h5>
            </div>
            <div class="card-body">
                <div class="row text-center">
                    <div class="col-6">
                        <div class="border-end">
                            <h3 class="text-danger fw-bold mb-0">{{ resumo.total_notas }}</h3>
                            <small class="text-muted">Notas Cadastradas</small>
                        </div>
                    </div>
                    <div class="col-6">
                        <h3 class="text-success fw-bold mb-0">{{ resumo.total_numeros }}</h3>
                        <small class="text-muted">Números da Sorte</small>
                    </div>
                </div>
                <hr class="my-3">
                <div class="text-center">
                    <div class="mb-2">
                        <strong><i class="fas fa-trophy me-2 text-warning"></i>Sorteio:</strong>
                        <span class="badge bg-danger ms-1">{{ resumo.sorteio[0] }}</span>
                    </div>
                    <div class="text-muted small">
                        {{ resumo.sorteio[1] }}
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Participant Info -->
    <div class="col-lg-6 mb-4">
        <div class="card border-info h-100">
            <div class="card-header bg-info text-white">
                <h5 class="card-title mb-0">
                    <i class="fas fa-user me-2"></i>Informações do Participante
                </h5>
            </div>
            <div class="card-body">
                <div class="mb-2">
                    <strong><i class="fas fa-user me-2 text-info"></i>Nome:</strong>
                    <span>{{ resumo.cliente[0] }}</span>
                </div>
                <div class="mb-2">
                    <strong><i class="fas fa-id-card me-2 text-info"></i>CPF:</strong>
                    <span>{{ resumo.cliente[1] }}</span>
                </div>
                <div class="mb-0">
                    <strong><i class="fas fa-phone me-2 text-info"></i>Telefone:</strong>
                    <span>{{ resumo.cliente[2] }}</span>
                </div>
                <div class="mb-0">
                    <strong><i class="fa-solid fa-money-check-dollar me-2 text-info"></i>Saldo:</strong>
                    <span>R$ {{ "%.2f"|format(resumo.cliente[3]) }}</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Action Buttons -->
    <div class="col-12">
        <div class="card">
            <div class="card-header bg-light">
                <h5 class="card-title mb-0">
                    <i class="fas fa-tasks me-2"></i>Ações Disponíveis
                </h5>
            </div>
            <div class="card-body">
                <div class="row g-3">
                    <div class="col-lg-3 col-md-6">
                        <a href="{{ url_for('nota.cadastrar_nota') }}" class="btn btn-danger w-100 h-100 d-flex flex-column align-items-center justify-content-center py-3">
                            <i class="fas fa-plus-circle fa-2x mb-2"></i>
                            <span class="fw-bold">Cadastrar Nota</span>
                            <small>Adicionar nova nota fiscal</small>
                        </a>
                    </div>
                    <div class="col-lg-3 col-md-6">
                        <a href="{{ url_for('nota.mostrar_notas') }}" class="btn btn-warning w-100 h-100 d-flex flex-column align-items-center justify-content-center py-3">
                            <i class="fas fa-receipt fa-2x mb-2"></i>
                            <span class="fw-bold">Mostrar Notas</span>
                            <small>Ver notas cadastradas</small>
                        </a>
                    </div>
                    <div class="col-lg-3 col-md-6">
                        <a href="{{ url_for('numero.mostrar_numeros') }}" class="btn btn-success w-100 h-100 d-flex flex-column align-items-center justify-content-center py-3">
                            <i class="fas fa-ticket-alt fa-2x mb-2"></i>
                            <span class="fw-bold">Mostrar Números</span>
                            <small>Ver números da sorte</small>
                        </a>
                    </div>
                    <div class="col-lg-3 col-md-6">
                        <a href="{{ url_for('informacoes.informacoes') }}" class="btn btn-info w-100 h-100 d-flex flex-column align-items-center justify-content-center py-3">
                            <i class="fas fa-info-circle fa-2x mb-2"></i>
                            <span class="fw-bold">Informações</span>
                            <small>Regras e prêmios</small>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Quick Stats -->
<div class="row mt-4">
    <div class="col-12">
        <div class="alert alert-info d-flex align-items-center" role="alert">
            <i class="fas fa-lightbulb me-3 fa-lg"></i>
            <div>
                <strong>Dica:</strong> A cada R$ 20,00 em notas validadas, você ganha 1 número da sorte. 
                Continue cadastrando suas notas para aumentar suas chances de ganhar!
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    // Auto-refresh dashboard data every 30 seconds using HTMX
    setInterval(function() {
        //htmx.ajax('GET', '{{ url_for("dashboard.atualizar_dashboard") }}', {target: 'main'});
    }, 30000);
</script>
{% endblock %}
